<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='list_product.css') }}">
</head>
<body>
    <header>
        <h1>Danh s√°ch s·∫£n ph·∫©m</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('main_routes.home') }}">Trang ch·ªß</a></li>
                <li><a href="{{ url_for('products.add_product') }}">Th√™m s·∫£n ph·∫©m</a></li>
                <li>
                    <a href="{{ url_for('cart.view_cart') }}" class="cart-btn">
                        üõí Gi·ªè h√†ng 
                        {% if session['cart'] %}
                            <span class="cart-count">{{ session['cart']|length }}</span>
                        {% endif %}
                    </a>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
                <div class="flash flash-{{ category }}">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}
        <table class="product-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>T√™n s·∫£n ph·∫©m</th>
                    <th>M√¥ t·∫£</th>
                    <th>Gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>H√¨nh ·∫£nh</th>
                    <th>H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td>{{ product.id }}</td>
                    <td>{{ product.name }}</td>
                    <td>{{ product.description }}</td>
                    <td>{{ "{:,.0f}".format(product.price|float) }} VND</td>
                    <td>{{ product.stock }}</td>
                    <td><img src="{{ product.image_url }}" alt="H√¨nh ·∫£nh s·∫£n ph·∫©m" class="product-img"></td>
                    <td>
                        <a href="{{ url_for('products.edit_product', product_id=product.id) }}" class="edit-btn">S·ª≠a</a>
                    
                        <form action="{{ url_for('products.delete_product', product_id=product.id) }}" method="POST" class="inline-form">
                            <button type="submit" class="delete-btn" onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a s·∫£n ph·∫©m n√†y?')">X√≥a</button>
                        </form>
                    
                        <form action="{{ url_for('cart.add_to_cart', product_id=product.id) }}" method="POST" class="inline-form">
                            <button type="submit" class="buy-btn">Mua h√†ng</button>
                        </form>
                    </td>
                    
                </tr>
                {% endfor %}
            </tbody>
        </table>
        
    </main>
</body>
</html>
